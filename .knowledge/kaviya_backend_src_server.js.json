{"is_source_file": true, "format": "JavaScript", "description": "This is the main server entry point for a Node.js backend application using Express. It sets up middleware, route handlers, health check endpoints, CORS configuration, database connection handling, and error handling. The file also manages server startup based on database connectivity.", "external_files": ["./routes/index.js", "./config/db.js", "./utils/errors.js"], "external_methods": ["connectDB", "getMongoUri", "errorHandler", "ApplicationError"], "published": ["app"], "classes": [], "methods": [{"name": "loginLogger(req, res, next)", "description": "Middleware for logging login requests while masking sensitive data and logging outcomes.", "scope": "", "scopeKind": ""}], "calls": ["cors", "express", "mongoose.connection.readyState", "router.handle", "errorHandler", "connectDB", "getMongoUri"], "search-terms": ["server.js", "Express server setup", "MongoDB connection", "health endpoints", "CORS configuration", "login route middleware", "error handling", "server startup"], "state": 2, "file_id": 14, "knowledge_revision": 54, "git_revision": "7cef28f74eb1239aa1667eb89b64dc9526d9c5cd", "revision_history": [{"29": ""}, {"36": "f5f1ab800a5d8d9f9e5f28a827169affadd1ab9e"}, {"42": "354f392618d915d895614a52c5282882f6077677"}, {"46": "b8f98c6702417f69cffe227e8361473370e78fe3"}, {"48": "8271e6cd1912bbd2869f3b98308286716ecadb1a"}, {"49": "8271e6cd1912bbd2869f3b98308286716ecadb1a"}, {"54": "7cef28f74eb1239aa1667eb89b64dc9526d9c5cd"}], "ctags": [{"_type": "tag", "name": "MONGODB_URI", "path": "/home/kavia/workspace/code-generation/kaviya-kids-learning-hub-263928-263939/kaviya_backend/src/server.js", "pattern": "/^const MONGODB_URI = getMongoUri();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "PORT", "path": "/home/kavia/workspace/code-generation/kaviya-kids-learning-hub-263928-263939/kaviya_backend/src/server.js", "pattern": "/^const PORT = parseInt(process.env.PORT || '3000', 10); \\/\\/ Bind to 3000 by default for containe/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "allowedOrigins", "path": "/home/kavia/workspace/code-generation/kaviya-kids-learning-hub-263928-263939/kaviya_backend/src/server.js", "pattern": "/^const allowedOrigins = rawOrigins.split(',').map(s => s.trim()).filter(Boolean);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/kaviya-kids-learning-hub-263928-263939/kaviya_backend/src/server.js", "pattern": "/^const app = express();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "loginLogger", "path": "/home/kavia/workspace/code-generation/kaviya-kids-learning-hub-263928-263939/kaviya_backend/src/server.js", "pattern": "/^function loginLogger(req, res, next) {$/", "language": "JavaScript", "kind": "function", "signature": "(req, res, next)"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/kaviya-kids-learning-hub-263928-263939/kaviya_backend/src/server.js", "pattern": "/^      password: req.body?.password ? '[REDACTED]' : null,$/", "language": "JavaScript", "kind": "property", "scope": "loginLogger.safeBody", "scopeKind": "class"}, {"_type": "tag", "name": "rawOrigins", "path": "/home/kavia/workspace/code-generation/kaviya-kids-learning-hub-263928-263939/kaviya_backend/src/server.js", "pattern": "/^const rawOrigins = process.env.ALLOWED_ORIGINS || 'http:\\/\\/localhost:3000';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "safeBody", "path": "/home/kavia/workspace/code-generation/kaviya-kids-learning-hub-263928-263939/kaviya_backend/src/server.js", "pattern": "/^    const safeBody = {$/", "language": "JavaScript", "kind": "class", "scope": "loginLogger", "scopeKind": "class"}, {"_type": "tag", "name": "useWildcard", "path": "/home/kavia/workspace/code-generation/kaviya-kids-learning-hub-263928-263939/kaviya_backend/src/server.js", "pattern": "/^const useWildcard = allowedOrigins.includes('*');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/kaviya-kids-learning-hub-263928-263939/kaviya_backend/src/server.js", "pattern": "/^      username: req.body?.username || null,$/", "language": "JavaScript", "kind": "property", "scope": "loginLogger.safeBody", "scopeKind": "class"}], "hash": "1b48f456f6f1149bd9e83a7682b617a7", "format-version": 4, "code-base-name": "kaviya_backend", "filename": "kaviya_backend/src/server.js", "fields": [{"name": "password: req.body?.password ? '[REDACTED]' : null,", "scope": "loginLogger.safeBody", "scopeKind": "class", "description": "unavailable"}, {"name": "username: req.body?.username || null,", "scope": "loginLogger.safeBody", "scopeKind": "class", "description": "unavailable"}]}